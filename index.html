<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Operation: Django Salsa</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="landingPage" class="landing-page">
        <h1>ğŸ¤  OPERATION: DJANGO SALSA ğŸ•µï¸</h1>
        <div class="subtitle">
            Agent Wildflower ğŸŒ¸ & The Onion Slayer ğŸ§…
        </div>

        <div class="landing-briefing">
            <h2>ğŸ“œ OPERATION BRIEFING</h2>
            <p><strong>Date:</strong> December 6, 2025</p>
            <p><strong>Location:</strong> Agent Wildflower's Hideout â†’ The Tilted Saloon</p>
            <p>
                Welcome to Operation Django Salsaâ€”where western grit meets spy finesse. Tonight's mission is simple: 
                create an unforgettable evening through tactical planning, spontaneous connection, and just the right 
                amount of controlled chaos. Every objective completed brings you closer to legendary status.
            </p>
            <p>
                <strong>Mission Timeline:</strong><br>
                <strong>1700-1745:</strong> Rendezvous at the Hideout â€” welcome drinks, cooking nachos, setting up movie command center<br>
                <strong>1745-2100:</strong> The Django Protocol â€” enjoy homemade nachos while watching the full 3-hour western epic<br>
                <strong>2100-2115:</strong> Showdown at Sundown â€” witness the finale, share reactions, transition to next phase<br>
                <strong>2115-2200:</strong> The Road to the Saloon â€” journey with conversation, wagers, and anticipation<br>
                <strong>2200-Late:</strong> Infiltrating the Tilted Saloon â€” drinks, entertainment, and evening activities
            </p>
            <p style="color: #d4af37; font-style: italic;">
                Score points through main objectives, mini-games, and side quests. Unlock secret challenges. 
                Earn achievements. But remember: the real victory is the quality time spent together.
            </p>
        </div>

        <div class="mode-selection">
            <h2 style="color: #d4af37; text-align: center; margin-bottom: 20px;">âš”ï¸ SELECT YOUR MODE âš”ï¸</h2>
            <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                <div class="mode-card" onclick="selectMode('coop')">
                    <div class="mode-icon">ğŸ¤</div>
                    <h3>CO-OP MODE</h3>
                    <p>Work together as a team. Share objectives and combine your scores. Perfect harmony leads to legendary status!</p>
                    <ul style="font-size: 11px; text-align: left; margin-top: 10px;">
                        <li>Shared scoring system</li>
                        <li>Team challenges</li>
                        <li>Cooperative mini-games</li>
                        <li>Combined progress tracking</li>
                    </ul>
                </div>
                <div class="mode-card" onclick="selectMode('versus')">
                    <div class="mode-icon">âš”ï¸</div>
                    <h3>VERSUS MODE</h3>
                    <p>Compete head-to-head! Earn individual points and battle for supremacy. May the best agent win!</p>
                    <ul style="font-size: 11px; text-align: left; margin-top: 10px;">
                        <li>Individual scoring</li>
                        <li>Competitive challenges</li>
                        <li>Head-to-head mini-games</li>
                        <li>Winner takes glory</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="sync-options" style="margin: 30px 0; display: none;">
            <h3 style="color: #d4af37; text-align: center; margin-bottom: 15px;">ğŸ”„ SYNC OPTIONS</h3>
            <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                <button class="btn primary" onclick="createSyncSession()" style="font-size: 12px; padding: 10px 20px;">
                    ğŸ“± CREATE SESSION<br>
                    <span style="font-size: 9px; opacity: 0.8;">(Host)</span>
                </button>
                <button class="btn primary" onclick="showJoinModal()" style="font-size: 12px; padding: 10px 20px;">
                    ğŸ”— JOIN SESSION<br>
                    <span style="font-size: 9px; opacity: 0.8;">(Partner)</span>
                </button>
                <button class="btn" onclick="skipSync()" style="font-size: 12px; padding: 10px 20px;">
                    ğŸ¯ SOLO MODE<br>
                    <span style="font-size: 9px; opacity: 0.8;">(No Sync)</span>
                </button>
            </div>
            <div id="sessionInfo" class="hidden" style="margin-top: 20px; padding: 15px; background: rgba(74, 144, 226, 0.2); border-radius: 8px; border: 2px solid #4a90e2;">
                <div style="font-size: 13px; color: #4a90e2; margin-bottom: 10px;">ğŸ“¡ SYNC ACTIVE</div>
                <div style="font-size: 11px; color: #c0c0c0;">Session Code: <span id="sessionCode" style="color: #d4af37; font-weight: bold;"></span></div>
                <div style="font-size: 10px; color: #888; margin-top: 5px;">Partner Status: <span id="partnerStatus">Waiting...</span></div>
            </div>
        </div>
        
        <div style="margin-top: 40px; text-align: center;">
            <button class="btn" onclick="enterTestMode()" style="font-size: 11px; padding: 8px 20px; opacity: 0.7;">ğŸ”§ TEST MODE</button>
        </div>
    </div>

    <div id="mainContent" class="container main-content">
        <div class="header">
            <h1>ğŸ¤  OPERATION: DJANGO SALSA ğŸ•µï¸</h1>
            <div class="codenames">
                Agent Wildflower ğŸŒ¸ & The Onion Slayer ğŸ§…
            </div>
            <div id="modeIndicator" class="mode-indicator-header" style="margin-top: 10px; font-size: 14px; color: #d4af37;"></div>
            <div id="versusScores" class="versus-scores hidden" style="margin-top: 10px; display: flex; gap: 20px; justify-content: center;">
                <div class="player-score">
                    <span style="color: #4a90e2;">ğŸŒ¸ Agent Wildflower:</span>
                    <span id="player1Score" style="color: #d4af37; font-weight: bold;">0</span>
                </div>
                <div class="player-score">
                    <span style="color: #e74c3c;">ğŸ§… The Onion Slayer:</span>
                    <span id="player2Score" style="color: #d4af37; font-weight: bold;">0</span>
                </div>
            </div>
            <div style="margin-top: 10px;">
                <button class="btn" onclick="clearSave()" style="font-size: 10px; padding: 5px 12px; opacity: 0.6;">ğŸ—‘ï¸ Clear Save</button>
            </div>
            <div id="testModeControls" class="hidden" style="margin-top: 15px; padding: 15px; background: rgba(74, 144, 226, 0.2); border-radius: 8px; border: 2px solid #4a90e2;">
                <div style="font-size: 12px; color: #4a90e2; font-weight: bold; margin-bottom: 10px;">ğŸ”§ TEST MODE CONTROLS</div>
                <div style="display: flex; gap: 10px; align-items: center; justify-content: center; flex-wrap: wrap; margin-bottom: 10px;">
                    <button class="btn primary" id="toggleRestrictionsBtn" onclick="toggleTestRestrictions()" style="font-size: 10px; padding: 5px 12px;">ğŸ”“ Restrictions: OFF</button>
                </div>
                <div style="display: flex; gap: 10px; align-items: center; justify-content: center; flex-wrap: wrap;">
                    <input type="time" id="testTimeInput" style="padding: 5px; font-family: 'Courier New', monospace; font-size: 11px; border-radius: 5px; border: 1px solid #4a90e2; background: rgba(22, 33, 62, 0.8); color: #e8e8e8;">
                    <button class="btn" onclick="setTestTime()" style="font-size: 10px; padding: 5px 12px;">â° Set Time</button>
                    <button class="btn" onclick="clearTestTime()" style="font-size: 10px; padding: 5px 12px;">ğŸ”„ Reset Time</button>
                </div>
                <div id="currentTestTime" style="font-size: 10px; color: #888; margin-top: 8px; text-align: center;"></div>
            </div>
        </div>

        <div class="progress-bar">
            <div class="level-markers" id="levelMarkers">
                <div class="level-marker" style="left: 0%;">
                    <div class="rank-label">ğŸ… Rookie</div>
                    <div class="rank-points">0</div>
                </div>
                <div class="level-marker" style="left: 20%;">
                    <div class="rank-label">ğŸ¥‰ Capable</div>
                    <div class="rank-points">200</div>
                </div>
                <div class="level-marker" style="left: 40%;">
                    <div class="rank-label">ğŸ¥ˆ Skilled</div>
                    <div class="rank-points">400</div>
                </div>
                <div class="level-marker" style="left: 60%;">
                    <div class="rank-label">ğŸ¥‡ Elite</div>
                    <div class="rank-points">600</div>
                </div>
                <div class="level-marker" style="left: 80%;">
                    <div class="rank-label">ğŸ’ Master</div>
                    <div class="rank-points">800</div>
                </div>
                <div class="level-marker" style="left: 100%;">
                    <div class="rank-label">ğŸ‘‘ Legendary</div>
                    <div class="rank-points">1000</div>
                </div>
            </div>
            <div class="progress-fill" id="progressFill"></div>
            <div class="progress-text" id="progressText">0 / 1000 points</div>
        </div>

        <div class="scoring-system briefing collapsed" id="scoringSection">
            <h3 onclick="toggleSection('scoringSection')" style="cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px;">
                âš¡ POINT SYSTEM
                <span class="collapse-arrow">â–¼</span>
            </h3>
            <div class="briefing-content">
                <div style="background: rgba(74, 144, 226, 0.15); padding: 12px; border-radius: 8px; margin-bottom: 15px; border-left: 3px solid #4a90e2;">
                    <strong style="color: #4a90e2;">ğŸ“Š SCORING BREAKDOWN</strong>
                    <div style="font-size: 11px; margin-top: 8px; color: #c0c0c0;">
                        Per Mission: 1 Main (100pts) + 2 Mini-games (60pts) + 3 Side Quests (60pts) = <strong style="color: #d4af37;">220 pts</strong><br>
                        5 Missions Total = <strong style="color: #d4af37;">1,100 base points</strong><br>
                        Secret Mission: <strong style="color: #d4af37;">+75 pts</strong><br>
                        10 Witching Hour Tasks: <strong style="color: #d4af37;">+400 pts</strong><br>
                        <strong style="color: #ffd700;">Maximum Possible: 1,575 points</strong>
                    </div>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <strong style="color: #7cb342;">âœ… EARNING POINTS (CO-OP MODE):</strong>
                    <ul style="margin-top: 8px;">
                        <li>Main Objective: <strong style="color: #7cb342;">+100 pts</strong></li>
                        <li>Mini-Game: <strong style="color: #4a90e2;">+30 pts</strong></li>
                        <li>Side Quest: <strong style="color: #7cb342;">+20 pts</strong></li>
                        <li>Secret Mission: <strong style="color: #9b59b6;">+75 pts</strong></li>
                        <li>Witching Hour Task: <strong style="color: #9b59b6;">+40 pts</strong></li>
                    </ul>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <strong style="color: #e74c3c;">âš”ï¸ VERSUS MODE SCORING:</strong>
                    <ul style="margin-top: 8px;">
                        <li>Winner: <strong style="color: #ffd700;">Full points</strong> | Loser: <strong style="color: #888;">Half points</strong></li>
                        <li>Mini-Game Won: <strong style="color: #7cb342;">+30 pts</strong> (Loser: +15 pts)</li>
                        <li>Side Quest Won: <strong style="color: #7cb342;">+20 pts</strong> (Loser: +10 pts)</li>
                        <li>Secret Mission Won: <strong style="color: #9b59b6;">+75 pts</strong> (Loser: +50 pts)</li>
                        <li>Witching Hour Won: <strong style="color: #9b59b6;">+40 pts</strong> (Loser: +25 pts)</li>
                    </ul>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <strong style="color: #e74c3c;">âŒ PENALTIES:</strong>
                    <ul style="margin-top: 8px;">
                        <li>Missed Main Objective: <strong style="color: #e74c3c;">-50 pts</strong></li>
                        <li>Reroll (cumulative): <strong style="color: #e74c3c;">-10, -20, -30 pts</strong></li>
                        <li>Secret Mission Failed: <strong style="color: #e74c3c;">-30 pts</strong> (penalty challenge available)</li>
                    </ul>
                </div>
                
                <div class="ranks-display">
                    <strong style="color: #d4af37;">ğŸ† RANK THRESHOLDS:</strong><br>
                    <div class="rank-item"><span class="rank-name">ğŸ… Rookie Recruits:</span> 0-199 pts</div>
                    <div class="rank-item"><span class="rank-name">ğŸ¥‰ Capable Operatives:</span> 200-399 pts</div>
                    <div class="rank-item"><span class="rank-name">ğŸ¥ˆ Skilled Agents:</span> 400-599 pts</div>
                    <div class="rank-item"><span class="rank-name">ğŸ¥‡ Elite Partners:</span> 600-799 pts</div>
                    <div class="rank-item"><span class="rank-name">ğŸ’ Master Spies:</span> 800-999 pts</div>
                    <div class="rank-item"><span class="rank-name">ğŸ‘‘ Legendary Partners:</span> 1000+ pts</div>
                </div>
            </div>
        </div>

        <div id="missionsContainer"></div>

        <div class="secret-mission-container collapsed" id="secretMissionSection">
            <h3 onclick="toggleSection('secretMissionSection')" style="cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px;">
                ğŸ” CLASSIFIED: SECRET MISSION
                <span class="collapse-arrow" id="secret-arrow">â–¶</span>
            </h3>
            <div class="secret-content" id="secretContent">
                <p style="font-size: 13px; margin-bottom: 15px; line-height: 1.5;">
                    A secret phrase will unlock a covert operation. When spoken, the mission activates immediately. 
                    Complete it within the time limit to earn bonus points.
                </p>
                <button class="btn primary" id="revealSecretBtn" onclick="revealSecretMission()">REVEAL SECRET MISSION</button>
                <div id="secretMissionContent" class="hidden"></div>
            </div>
        </div>

        <div class="midnight-missions-container collapsed" id="midnightContainer">
            <h3 onclick="toggleSection('midnightContainer')" style="cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px;">
                ğŸŒ™ THE WITCHING HOUR CHALLENGES
                <span class="collapse-arrow" id="midnight-arrow">â–¶</span>
            </h3>
            <div id="midnightContentWrapper">
                <p style="font-size: 12px; color: #888; text-align: center; margin-bottom: 15px;">Special bonus missions - complete them all for maximum points!</p>
                <div id="midnightContent">
                <div class="midnight-progress">
                    Completed: <span id="midnightProgress">0 / 10</span>
                </div>
                <div id="midnightMissionContent"></div>
                </div>
            </div>
        </div>

        <div class="achievements-container collapsed" id="achievementsSection">
            <h3 onclick="toggleSection('achievementsSection')" style="cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px;">
                ğŸ† ACHIEVEMENTS
                <span class="collapse-arrow" id="achievements-arrow">â–¶</span>
            </h3>
            <div id="achievementsWrapper">
                <div id="achievementsContainer"></div>
            </div>
        </div>

        <button class="btn primary finish-mission-btn" id="completeOperationBtn" onclick="finishMission()" disabled style="opacity: 0.5; cursor: not-allowed;">ğŸ¤  COMPLETE OPERATION: DJANGO SALSA ğŸ•µï¸</button>

        <div id="summaryScreenContainer" class="hidden"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <script src="script.js"></script>
</body>
</html>
